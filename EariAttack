const _0x45bedf=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}(),_0x587c6c=_0x45bedf(this,function(){const t=function(){return!t.constructor('return /" + this + "/')().compile("^([^ ]+( +[^ ]+)+)+[^ ]}").test(_0x587c6c)};return t()});_0x587c6c();const _0x537303=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){_0x537303(this,function(){const t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=_0x510b3d("init");t.test(i+"chain")&&e.test(i+"input")?_0x510b3d():i("0")})()}();const _0x113e18=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();setInterval(function(){_0x510b3d()},4e3);const _0x58a28c=_0x113e18(this,function(){const t=function(){},e=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(e){t=window}return t}();e.console?(e.console.log=t,e.console.warn=t,e.console.debug=t,e.console.info=t,e.console.error=t,e.console.exception=t,e.console.table=t,e.console.trace=t):e.console=function(t){const e={};return e.log=t,e.warn=t,e.debug=t,e.info=t,e.error=t,e.exception=t,e.table=t,e.trace=t,e}(t)});function _0x510b3d(t){function e(t){if("string"==typeof t)return function(t){}.constructor("while (true) {}").apply("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor("debugger").call("action"):function(){return!1}.constructor("debugger").apply("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(t){}}_0x58a28c(),(()=>{let t=function(){"use strict";let t=!0;window.addEventListener("focus",()=>t=!0),window.addEventListener("blur",()=>t=!1);let i=[],n=[],s=256,o=[[202,227,255],[255,255,255],[255,255,255],[228,228,228],[196,196,196],[136,136,136],[78,78,78],[0,0,0],[244,179,174],[255,167,209],[255,84,178],[255,101,101],[229,0,0],[154,0,0],[254,164,96],[229,149,0],[160,106,66],[96,64,40],[245,223,176],[255,248,137],[229,217,0],[148,224,68],[2,190,1],[104,131,56],[0,101,19],[202,227,255],[0,211,221],[0,131,199],[0,0,234],[25,25,115],[207,110,228],[130,0,128]];const r=/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent);let h=(()=>{const t=t=>t>=0?t:-t;let e,i,n,s,r;return h=>{for(e=1/0,s=0;s!==o.length;s++){if(o[s][0]===h[0]&&o[s][1]===h[1]&&o[s][2]===h[2])return o[s];r=o[s],(n=t(r[0]-h[0])+t(r[1]-h[1])+t(r[2]-h[2]))<e&&(e=n,i=s)}return o[i]}})();Number.prototype.between=function(t,e){return this>t&&this<e};const a=(t,e)=>{let i=Object.keys(t);for(let n of i)e.call(null,t[n],n)},l={OP_CODE:193,hydrate:t=>({x:t.getUint8(1),y:t.getUint8(2),offset:t.getUint8(3)<<16|t.getUint16(4),color:t.getUint8(6)}),dehydrate:function(t,e,i,n){const s=new ArrayBuffer(7),o=new DataView(s);return o.setUint8(0,this.OP_CODE),o.setUint8(1,t),o.setUint8(2,e),o.setUint8(3,i>>>16),o.setUint16(4,65535&i),o.setUint8(6,n),s}},c={OP_CODE:194,hydrate:t=>t.getUint32(1)},d={OP_CODE:195,hydrate:t=>({retCode:t.getUint8(1),wait:t.getUint32(2),coolDownSeconds:t.getInt16(6)})},u={OP_CODE:160,dehydrate(t){let e=new ArrayBuffer(2),i=new DataView(e);return i.setInt8(0,160),i.setInt8(1,t),e}},g={OP_CODE:161,dehydrate(t){let e=new ArrayBuffer(3),i=new DataView(e);return i.setInt8(0,161),i.setInt16(1,t),e}},m={OP_CODE:162,dehydrate(t){let e=new ArrayBuffer(3),i=new DataView(e);return i.setInt8(0,162),i.setInt16(1,t),e}};const f=new class{constructor(){console.log("[WS] creating ProtocolClient"),this.isConnecting=this.isConnected=!1,this.ws=this.name=null,this.canvasId=0}async connect(){this.isConnecting=!0,this.ws&&console.log("[WS] WebSocket already open, not starting"),this.timeConnected=Date.now(),this.ws=new WebSocket("ws"+("http:"===location.protocol?"":"s")+"://"+location.hostname+(location.port?":"+location.port:"")+"/ws"),this.ws.binaryType="arraybuffer",this.ws.onopen=(()=>{this.isConnecting=!1,this.isConnected=!0,console.log("[WS] open"),null!==this.canvasId&&this.ws.send(u.dehydrate(this.canvasId))}),this.ws.onmessage=(({data:t})=>{try{"string"!=typeof t&&this.onBinaryMessage(t)}catch(t){console.error("[WS] An error occured while parsing websocket message"),console.error(t)}}),this.ws.onclose=(()=>{console.log("close"),this.ws=null,this.isConnected=!1;const t=this.timeConnected<Date.now()-7e3?1e3:5e3;console.warn("[WS] Socket is closed. Reconnect will be attempted in "+t+" ms.",e.reason),setTimeout(this.connect.bind(this),5e3)}),this.ws.onerror=(()=>{console.error("[WS] Socket encountered error, closing socket",e),this.ws.close()})}setName(t){if(this.isConnected&&this.name!==t){if(console.log("[WS] Name change requieres WebSocket restart"),!this.isConnected)return;this.isConnected=!1,console.log("[WS] Restarting WebSocket"),this.ws.onclose=this.ws.onmessage=null,this.ws.close(),this.ws=null,this.connect()}}registerChunk(t,e){this.isConnected&&this.ws.send(g.dehydrate(t<<8|e))}deRegisterChunk(t,e){this.isConnected&&this.ws.send(m.dehydrate(t<<8|e))}onBinaryMessage(e){if(0===e.byteLength)return;const r=new DataView(e);switch(r.getUint8(0)){case l.OP_CODE:let e=l.hydrate(r);if(!k.chunks.get(e.x,e.y))return;let h=e.x*s+e.offset%s+k.borders.x1,a=e.y*s+~~(e.offset/s)+k.borders.y1,u=o[e.color];console.log("[WS] pxl "+h+" "+a+" ["+u+"]"),i=[h,a],k.setPixel(h,a,u);break;case c.OP_CODE:p.setTimer(_.time=c.hydrate(r)/1e3);break;case d.OP_CODE:let{retCode:g,wait:m,coolDownSeconds:f}=d.hydrate(r);if(p.setTimer(_.time=m/1e3),console.log("[WS] return code - "+g),0!==g)return k.setPixel(...n),console.warn("retCode : "+g),void(10===g&&(P.log("Captcha"),window.grecaptcha.execute(),t||function(t,e){if(!("Notification"in window))return;const i=()=>new Notification(t,e);"granted"===Notification.permission?i():"denied"!==Notification.permission&&Notification.requestPermission(t=>"granted"===t&&i())}("Void Bot",{body:"CAPTCHA appeared"}),P.stop()));P.timeout&&(_.canPlace()?P.restart(0):P.restart(f+A(500,1e3)))}}setPixel(t,e,i=7){if(!this.isConnected)return;let[r,h]=k.absToTiled(t,e),a=(t-r*s-k.borders.x1)%s+(e-h*s-k.borders.y1)%s*s;this.ws.send(l.dehydrate(r,h,a,i)),n=[t,e,k.getPixel(t,e)],k.setPixel(t,e,o[i]),p.setLastPxl(t,e,o[i])}};f.connect(),setInterval(console.clear,12e4),D(atob("aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL05hZG94WC9KVkN2YWluY3JhL21hc3Rlci9TZWNvbmRQYXJ0")).then(()=>{},()=>{alert("The bot has been deactivated or you have a connection problem"),f.setPixel=(()=>{}),P.restart=(()=>{}),p.window.style.display="none"});let p=new function(){this.window=R({type:"div",style:"color:red; background-color:black; padding:3px; position:absolute; top:2%; right:2%; width:40%; font-weight:bold;"}),r&&(this.window.style.fontSize="85%"),this.window.appendChild(R({type:"div",text:"Make Void great again!",style:"font-size:110%;"})),this.window.appendChild(R({type:"hr",style:"border-color: darkred; margin: 3px 0px 3px 0px;"})),r?this.window.appendChild(this.right=this.left=R({type:"div"})):(this.window.appendChild(this.left=R({type:"div",style:"float:right; width:50%;"})),this.window.appendChild(this.right=R({type:"div",style:"float:left; width:50%;"}))),this.left.appendChild(R({type:"div",text:"Bots online - "},[this.botOnline=R({type:"span",text:"null"})])),this.setBotOnline=(t=>this.botOnline.innerText!==t&&(this.botOnline.innerText=t)),this.left.appendChild(R({type:"div",text:"Status - "},[this.botStatusElement=R({type:"span"})])),this.setBotStatus=(t=>this.botStatusElement.innerText!==t&&(this.botStatusElement.innerText=t)),this.left.appendChild(R({type:"div",text:"Timer - "},[this.timerElement=R({type:"span"})])),this.setTimer=(t=>t!==this.timerElement.innerText&&(this.timerElement.innerText=~~(100*t)/100)),this.left.appendChild(R({type:"div",text:"Last pxl - "},[this.lastPxlElement=R({type:"span",text:"x y [r,g,b]"})])),this.setLastPxl=((t,e,i)=>t+" "+e+" ["+i+"]"!==this.lastPxlElement.innerText&&(this.lastPxlElement.innerText=t+" "+e+" ["+i+"]")),r&&(this.lastPxlElement.parentNode.style.display="none"),this.left.appendChild(R({type:"div",text:"Zone - "},[this.bordersElement=R({type:"span"})])),this.setBorders=(t=>t!==this.bordersElement.innerText&&(this.bordersElement.innerText=t)),r&&(this.bordersElement.parentNode.style.display="none"),this.right.appendChild(R({type:"div",text:"Strategy - "},[this.strategyElement=R({type:"select",style:"color:red; background-color:black; border-color:darkRed; font:inherit;"})])),this.addMode=(t=>{let e=document.createElement("option");e.value=e.innerText=t,this.strategyElement.appendChild(e)}),this.right.appendChild(R({type:"div",text:"Direction - "},[this.directionElement=R({type:"select",style:"color:red; background-color:black; border-color:darkRed; font:inherit;"})])),this.addDirection=(t=>{let e=document.createElement("option");e.value=e.innerText=t,this.directionElement.appendChild(e)}),this.right.appendChild(R({type:"div",text:"Cover - "},[this.coverElement=R({type:"select",style:"color:red; background-color:black; border-color:darkRed; font:inherit;"})])),this.addCover=(t=>{let e=document.createElement("option");e.value=e.innerText=t,this.coverElement.appendChild(e)}),this.right.appendChild(this.switcher=R({type:"button",text:"on/off",style:"color:red; background-color:black; border-color:darkRed; font:inherit; margin:5px;"})),this.switcher.addEventListener("click",()=>null===P.timeout?P.restart(0):P.stop()),document.body.appendChild(this.window)};p.setBotStatus("stopped"),O(),setInterval(O,3e4);let w=document.getElementsByClassName("coorbox")[0],x=document.getElementsByTagName("canvas")[0],y={worldX:null,worldY:null,clientX:null,clientY:null};window.addEventListener("mousemove",t=>{[y.worldX,y.worldY]=(t=>[+t[0],+t[1]])(w.innerText.match(b)),y.clientX=t.clientX,y.clientY=t.clientY,p.setBorders("["+B()+"]")});let b=new RegExp(/-?\d+/g);class v{constructor(t,e,i){this.x=t,this.y=e,this.data=i,this.lastUsing=(new Date).getTime(),this._c=null}get(t,e){return this._c=t+e*s<<2,[this.data[this._c],this.data[this._c+1],this.data[this._c+2]]}set(t,e,i){return this._c=t+e*s<<2,[this.data[this._c],this.data[this._c+1],this.data[this._c+2]]=[...i]}}let k=new function(){let t=this;this.chunkSize=s,this.maxLiveTime=12e4,this.tiledBorders={x1:0,y1:0,x2:256,y2:256,width:256,height:256},this.borders={x1:-this.tiledBorders.width*this.chunkSize/2,y1:-this.tiledBorders.height*this.chunkSize/2,x2:this.tiledBorders.width*this.chunkSize/2,y2:this.tiledBorders.height*this.chunkSize/2},this.chunks={get:function(t,e){return void 0===this[t]||void 0===this[t][e]?null:this[t][e]},set:function(e,i,n){return void 0===this[e]&&(this[e]={}),t.chunkList.push(this[e][i]=new v(e,i,n)),this[e][i]},delete:function(e,i){if(void 0!==this[e]&&void 0!==this[e][i]){this[e][i]=void 0;for(let n=0;n!==t.chunkList.length;n++)if(t.chunkList[n].x===e&&t.chunkList[n].y===i)return f.deRegisterChunk(t.chunkList[n].x,t.chunkList[n].y),t.chunkList.splice(n,1)}}},this.chunkList=[],this.canLoad=!0,this.maxLoadWaitTime=1e3,this.chunkGetTimeout=null,this.clearChunkGetTimeout=(()=>{null!==this.chunkGetTimeout&&(clearTimeout(this.chunkGetTimeout),this.chunkGetTimeout=null,this.canLoad=!0)}),this.setChunkGetTimeout=function(){this.clearChunkGetTimeout(),this.canLoad=!1,this.chunkGetTimeout=setTimeout(this.clearChunkGetTimeout.bind(this),this.maxLoadWaitTime)},this.garbageCollector=new function(){this.interval=null,this.clear=(()=>{let e=(new Date).getTime(),i=0;for(let n of t.chunkList)e-n.lastUsing>t.maxLiveTime&&(t.chunks.delete(n.x,n.y),i++);0!==i&&console.log("[GB] "+i+" chunks collected")}),this.start=(()=>{this.stop(),this.interval=setInterval(this.clear.bind(this),6e4)}),this.stop=(()=>null===this.interval||(clearInterval(this.interval),this.interval=null))},this.absToTiled=((t,e)=>[~~((t-this.borders.x1)/this.chunkSize),~~((e-this.borders.y1)/this.chunkSize)]),this.tiledToAbs=((t,e)=>[this.borders.x1+t*this.chunkSize,this.borders.y1+e*this.chunkSize]);{let t;this.getPixel=((e,i)=>(t=this.chunks.get(...this.absToTiled(e,i)))&&t.get((e-this.borders.x1)%this.chunkSize,(i-this.borders.y1)%this.chunkSize)),this.setPixel=((e,i,n)=>(t=this.chunks.get(...this.absToTiled(e,i)))&&t.set((e-this.borders.x1)%this.chunkSize,(i-this.borders.y1)%this.chunkSize,n))}this.loadChunk=(()=>{let e=new Uint32Array(o.length);o.forEach(([t,i,n],s)=>e[s]=4278190080|n<<16|i<<8|t);const i=t=>{let i=new Uint32Array(t.length);for(let n=0;n!==t.length;n++)i[n]=e[63&t[n]];return i};return async function(e,n){if(!t.canLoad||t.chunks.get(e,n))return;t.setChunkGetTimeout();let s=await fetch(location.protocol+"//"+location.host+"/chunks/0/"+e+"/"+n+".bmp");if(!s.ok)throw new Error("Network response was not ok.");{let r,h=await s.arrayBuffer();if(h.byteLength)r=function(e){let n=new Uint8ClampedArray(t.chunkSize**2<<2),s=new Uint32Array(n.buffer);return i(e).forEach((t,e)=>s[e]=t),n}(new Uint8Array(h)),console.log("Chunk "+e+" "+n+" loading"),f.registerChunk(e,n);else{r=new Uint8ClampedArray(t.chunkSize**2<<2);for(let t=0;t!==r.length;t+=4)[r[t],r[t+1],r[t+2],r[t+3]]=[...o[0],255];console.log("Empty answer "+e+" "+n)}t.chunks.set(e,n,r),t.clearChunkGetTimeout()}}})()};k.garbageCollector.start();let _=new function(){this.time=0,setInterval(()=>{isNaN(this.time)&&(this.time=0),--this.time<0&&(this.time=0),p.setTimer(this.time)},1e3),this.canPlace=(()=>this.time<52)};class C{constructor({x:t,y:e,width:i,height:n,name:s,url:o,img:r,canvas:h}={}){this.x=t,this.y=e,this.width=i,this.height=n,this.xEnd=this.x+this.width,this.yEnd=this.y+this.height,this.name=s,this.url=o||null,this.img=r||null,this.canvas=h||null,this._c=null}get(t,e){return this._c=t+e*this.width<<2,[this.canvas.data[this._c],this.canvas.data[this._c+1],this.canvas.data[this._c+2],this.canvas.data[this._c+3]]}load(t,e){if(null===this.url)return console.error("Template url isn't defined");this.img=new Image,this.img.crossOrigin="",this.img.onload=(()=>{let e;this.canvas=document.createElement("canvas"),this.width=this.canvas.width=this.img.width,this.height=this.canvas.height=this.img.height,this.xEnd=this.x+this.width,this.yEnd=this.y+this.height,this.ctx=this.canvas.getContext("2d"),this.ctx.drawImage(this.img,0,0),this.imageData=this.ctx.getImageData(0,0,this.width,this.height);let i=this.imageData.data;for(let t=0;t!==i.length;t+=4)0!==i[t+3]&&(e=h([i[t],i[t+1],i[t+2]]),[i[t],i[t+1],i[t+2]]=[...e]);this.ctx.putImageData(this.imageData,0,0),this.canvas.data=this.imageData.data,t&&t(this)}),this.img.onerror=e.bind(null,this),this.img.src=this.url}}let E="https://raw.githubusercontent.com/RomaniaIsLove/LongLiveRomania/master/data.json",S="https://raw.githubusercontent.com/RomaniaIsLove/LongLiveRomania/master/images/",T=new class{constructor(){this.general={},this.actual={},this._name=this._t=null}load(t){delete this.actual[t],this.general[t].load(e=>(console.log("Template "+t+" loaded"),console.log(this.actual[t]=e)),t=>console.error("Can't load template\n"+t.url))}add(t){return this.general[t.name]=this.actual[t.name]=new C(t)}get(t){return t in this.general?this.general[t].canvas||null:void 0}getTemplateNameAt(t,e){for(this._name in this.general)if(this._t=this.general[this._name],t>=this._t.x&&t<this._t.xEnd&&e>=this._t.y&&e<this._t.yEnd)return this._name;return null}isPxlInTemplates(t,e){for(this._name in this.general)if(this._t=this.general[this._name],t>=this._t.x&&t<this._t.xEnd&&e>=this._t.y&&e<this._t.yEnd)return!0;return!1}getPxlInTemplates(t,e){for(this._name in this.general)if(this._t=this.general[this._name],t>=this._t.x&&t<this._t.xEnd&&e>=this._t.y&&e<this._t.yEnd)return this._name in this.actual?this.actual[this._name].get(t-this._t.x,e-this._t.y):null;return null}intersect(t,e,i,n,s){return!(t.x>n||t.xEnd<e||t.y>s||t.yEnd<i)}haveTemplatesInZone(t,e,i,n){for(this._name in this.general)if(this.intersect(this.general[this._name],...arguments))return!0;return!1}getTemplatesInZone(t,e,i,n){let s=[];for(this._name in this.general)this.intersect(this.general[this._name],...arguments)&&s.push(this.general[this._name]);return s}};var z;E.length&&S.length&&(z=S,D(E).then(t=>{t=JSON.parse(t),a(t,t=>{t&&T.add({name:t.name,url:encodeURI(z+t.name+".png"),x:t.x,y:t.y,width:t.width,height:t.height})})}));let P=new function(){let t=this;this.x=null,this.y=null,this.chunkLoading=!1,this.availableMods=["random","regenerate","spread","mycelium","spores"],this.setMode=function(t){this.availableMods.includes(t)?this.log("New mode - "+(this._mode=t)):this.warn("Mode doesn't exist")},this.getMode=function(){return this._mode},this._mode=localStorage.mode||"spread",this.availableDirections=["default","center","near"],this.setDirection=function(t){this.availableDirections.includes(t)?this._direction=t:this.warn("Direction doesn't exist")},this.getDirection=function(){return this._direction},this._direction=localStorage.direction||"default",this.availableCovers=["all","colored","background","ground"],this.setCover=function(t){this.availableCovers.includes(t)?this._cover=t:this.warn("Cover doesn't exist")},this.getCover=function(){return this._cover},this._cover=localStorage.cover||"all",this.log=((...t)=>t.forEach(t=>console.log("[VB] "+t))),this.warn=((...t)=>t.forEach(t=>console.warn("[VB] "+t))),this.zone=new function(){let e;this.getPixelArea=function(e,i,n,s){let o,r,h=new Uint8ClampedArray(n*s<<2),a=0,l=0;for(t.chunkLoading=!1;a!==s;a++)for(o=0;o!==n;o++,l+=4)(r=k.getPixel(o+e,a+i))?(h[l]=r[0],h[l+1]=r[1],h[l+2]=r[2],h[l+3]=255):(t.chunkLoading=!0,k.loadChunk(...k.absToTiled(o+e,a+i)));return t.chunkLoading?null:h},this.override=function(){null!==this.xStart&&null!==this.yStart&&null!==this.width&&null!==this.height||t.log("Problems with bot.zone"),this.data=this.getPixelArea(this.xStart,this.yStart,this.width,this.height)},this.selRGB=[0,0,0],this.isSelectedColor=function(t){return this.selRGB[0]===t[0]&&this.selRGB[1]===t[1]&&this.selRGB[2]===t[2]},this.bc=[[202,227,255],[255,255,255]],this.isBackgroundColor=(()=>{let t;return function(e){for(t=0;t!==this.bc.length;t++)if(this.bc[t][0]===e[0]&&this.bc[t][1]===e[1]&&this.bc[t][2]===e[2])return!0;return!1}})(),this.xStart=null,this.yStart=null,this.width=null,this.height=null,this.data=[],this.pixelsToSet=[],this.targets=[],this.lastPxl=[null,null],this.analyze=function(){this.targets=[];let t,e,i,n,s,o=this.width-1,r=this.height-1;const h=(t,e)=>this.targets.push([t+this.xStart,e+this.yStart]);if(o>e||r>i)throw new Error("[VB] [Z] wrong borders");if(!P.availableCovers.includes(P._cover))throw new Error('[VB] [Z] Function "Analyze" undefined cover');switch(P._cover){case"all":t=(t=>{for(i=n=0;i!==r;i++,n+=this.width)for(e=0,s=n<<2;e!==o;e++,s+=4)!this.isSelectedColor([this.data[s],this.data[s+1],this.data[s+2]])&&t(e,i)});break;case"colored":t=(t=>{for(i=n=0;i!==r;i++,n+=this.width)for(e=0,s=n<<2;e!==o;e++,s+=4)!this.isBackgroundColor([this.data[s],this.data[s+1],this.data[s+2]])&&!this.isSelectedColor([this.data[s],this.data[s+1],this.data[s+2]])&&t(e,i)});break;case"background":t=(t=>{for(i=n=0;i!==r;i++,n+=this.width)for(e=0,s=n<<2;e!==o;e++,s+=4)this.isBackgroundColor([this.data[s],this.data[s+1],this.data[s+2]])&&!this.isSelectedColor([this.data[s],this.data[s+1],this.data[s+2]])&&t(e,i)});break;case"ground":t=(t=>{for(i=n=0;i!==r;i++,n+=this.width)for(e=0,s=n<<2;e!==o;e++,s+=4)this.data[s]===this.bc[1][0]&&this.data[s+1]===this.bc[1][1]&&this.data[s+2]===this.bc[1][2]&&!this.isSelectedColor([this.data[s],this.data[s+1],this.data[s+2]])&&t(e,i)});break;default:throw new Error("[VB] [Z] function forEach error")}if("random"===P._mode)t(h);else if("regenerate"===P._mode||"spread"===P._mode){if(t((t,e)=>8===this.blackPixelsAround(t,e)&&h(t,e)),this.targets.length)return;if(t((t,e)=>7===this.blackPixelsAround(t,e)&&h(t,e)),this.targets.length)return;if(t((t,e)=>6===this.blackPixelsAround(t,e)&&h(t,e)),this.targets.length)return;if("spread"===P._mode){if(t((t,e)=>5===this.blackPixelsAround(t,e)&&h(t,e)),this.targets.length)return;if(t((t,e)=>3===this.blackPixelsAround(t,e)&&h(t,e)),this.targets.length)return;t((t,e)=>this.haveBlackPixelsAround(t,e)&&h(t,e)),0===this.targets.length&&t(h)}}else if("mycelium"===P._mode){if(t((t,e)=>1===this.blackPixelsAround(t,e)&&h(t,e)),this.targets.length)return;if(t((t,e)=>2===this.blackPixelsAround(t,e)&&h(t,e)),this.targets.length)return;t((t,e)=>3===this.blackPixelsAround(t,e)&&h(t,e))}else"spores"===P._mode&&t((t,e)=>this.haveColoredPixelsAround(t,e)||h(t,e))},(()=>{let t=(t,i)=>(e=this.width*i+t<<2,!this.isBackgroundColor([this.data[e],this.data[e+1],this.data[e+2]]));this.haveColoredPixelsAround=function(e,i){return t(e,i-1)||t(e+1,i-1)||t(e+1,i)||t(e+1,i+1)||t(e,i+1)||t(e-1,i+1)||t(e-1,i)||t(e-1,i-1)}})(),(()=>{let t=(t,i)=>(e=this.width*i+t<<2,this.data[e]===this.selRGB[0]&&this.data[e+1]===this.selRGB[1]&&this.data[e+2]===this.selRGB[2]);this.haveBlackPixelsAround=function(e,i){return t(e,i-1)||t(e+1,i-1)||t(e+1,i)||t(e+1,i+1)||t(e,i+1)||t(e-1,i+1)||t(e-1,i)||t(e-1,i-1)}})(),(()=>{let t=(t,i)=>(e=this.width*i+t<<2,this.data[e]===this.selRGB[0]&&this.data[e+1]===this.selRGB[1]&&this.data[e+2]===this.selRGB[2]);this.blackPixelsAround=function(e,i){return t(e,i-1)+t(e+1,i-1)+t(e+1,i)+t(e+1,i+1)+t(e,i+1)+t(e-1,i+1)+t(e-1,i)+t(e-1,i-1)}})(),this.abs=(t=>t<0?-t:t),this.dist=((t,e,i,n)=>(t-i)**2+(e-n)**2)},this.getPixelToSet=function(){this.zone.analyze();for(let t=0;t!==this.zone.targets.length;t++)T.isPxlInTemplates(...this.zone.targets[t])&&(this.zone.targets.splice(t,1),t--);if(0===this.zone.targets.length)return null;if(1===this.zone.targets.length)return this.zone.targets[0];if("default"===this._direction)return this.zone.targets[A(0,this.zone.targets.length-1)];if("center"===this._direction){let t=(t=>[(t[0]+t[2])/2,(t[1]+t[3])/2])(B()),e=1/0,i=0,n=[];for(let s,o,r=0;r!==this.zone.targets.length;r++)s=this.zone.targets[r],o=this.zone.dist(...t,...s),this.zone.abs(o-e)<2?n.push(s):o<e&&(e=o,i=r,n=[s]);return this.zone.targets[i]}if("near"===this._direction){null===this.zone.lastPxl[0]&&(this.zone.lastPxl=(t=>[(t[0]+t[2])/2,(t[1]+t[3])/2])(B()));let t=1/0,e=[];for(let i,n,s=0;s<this.zone.targets.length;s++)i=this.zone.targets[s],n=this.zone.dist(...this.zone.lastPxl,...i),this.zone.abs(n-t)<2?e.push(i):n<t&&(t=n,e=[i]);return this.zone.lastPxl=e[A(0,e.length-1)]}},this.botting=function(){if(L()<2)return alert("Too big zoom"),this.restart(3e3);if(!_.canPlace())return this.log("Wait for timer"),this.restart(5e3+A(500,750));let[t,e,i,n]=B();this.zone.xStart=t,this.zone.yStart=e,this.zone.width=i-t,this.zone.height=n-e,this.zone.override();let s=performance.now(),o=null,r=[],h=!1;if(this.chunkLoading)return p.setBotStatus("load ch"),this.restart(1e3);if(T.haveTemplatesInZone(this.zone.xStart,this.zone.yStart,this.zone.xStart+this.zone.width,this.zone.yStart+this.zone.height))if(T.getTemplatesInZone(this.zone.xStart,this.zone.yStart,this.zone.xStart+this.zone.width,this.zone.yStart+this.zone.height).forEach(t=>!t.canvas&&(T.load(t.name),h=!0)),h)this.log("have unloaded temps");else{let t,e,i,n=0,s=this.zone.xStart+this.zone.width,o=this.zone.yStart+this.zone.height;for(e=this.zone.yStart;e<o;e++)for(t=this.zone.xStart;t<s;t++,n+=4)null!==(i=T.getPxlInTemplates(t,e))&&0!==i[3]&&(i[0]===this.zone.data[n]&&i[1]===this.zone.data[n+1]&&i[2]===this.zone.data[n+2]||r.push([t,e,I(i)]))}return!h&&r.length?(o=r[A(0,r.length-1)],p.setBotStatus("build tmp"),f.setPixel(...o),this.restart(1e4)):h?(p.setBotStatus("load tmp"),this.restart(1e3)):null===(o=this.getPixelToSet())?(this.log("Done"),p.setBotStatus("done"),this.restart(2e3)):(p.setBotStatus("voiding"),this.log("Pxl "+o.join(" ")+" / "+~~(performance.now()-s)),f.setPixel(...o),this.restart(1e4))},this.timeout=null,this.clearTimeout=(()=>null===this.timeout||(clearTimeout(this.timeout),this.timeout=null)),this.stop=(()=>(this.clearTimeout(),this.log("Stop"),p.setBotStatus("stopped"))),this.restart=function(t=500){this.clearTimeout(),this.timeout=setTimeout(this.botting.bind(this),t),this.log("R "+t)}};function B(){let t,e,i,n,s=L();return[t=~~(y.worldX-y.clientX/s+1),e=~~(y.worldY-y.clientY/s+1),i=~~(y.worldX+(x.width-y.clientX)/s-1),n=~~(y.worldY+(x.height-y.clientY)/s-1)]}function L(){let t=+window.location.hash.match(b)[2];return t>10?(t/10)**2:t**.1||1}function A(t,e){return Math.round(t-.5+Math.random()*(e-t+1))}function D(t,{method:e,headers:i,data:n}={method:"GET",headers:{},data:null}){return new Promise((s,o)=>{let r=new XMLHttpRequest;if(r.onload=(()=>{200!==r.status?o():s(r.responseText),r=null}),r.onerror=o,r.open(e,t),i)for(let t in i)r.setRequestHeader(t,i[t]);r.send(n)})}function R(t,e=[]){let i="text"===t.type?document.createTextNode(t.text||""):document.createElement(t.type);return t.id&&(i.id=t.id),t.class&&i.setAttribute("class",t.class),t.style&&(i.style=t.style),t.html?i.innerHTML=t.html:t.text&&(i.innerText=t.text),t.listeners&&a(t.listeners,(t,e)=>{i.addEventListener(e.startsWith("on")?e.substring(2):e,t)}),t.attributes&&a(t.attributes,(t,e)=>i.setAttribute(e,t)),e.length&&e.forEach(i.appendChild.bind(i)),i}function I(t){for(let e=o.length-1;-1!==e;e--)if(o[e][0]===t[0]&&o[e][1]===t[1]&&o[e][2]===t[2])return e;throw new Error("Undef clr "+t)}function O(){D("https://voidserv.glitch.me/online",{method:"POST"}).then(p.setBotOnline)}P.log("Mode - "+P._mode),P.log("Direction - "+P._direction),p.strategyElement.addEventListener("change",t=>P.setMode(localStorage.mode=t.target.value)),P.availableMods.forEach(t=>p.addMode(t)),p.strategyElement.childNodes.forEach(t=>t.value===P._mode&&t.setAttribute("selected","")),p.directionElement.addEventListener("change",t=>P.setDirection(localStorage.direction=t.target.value)),P.availableDirections.forEach(t=>p.addDirection(t)),p.directionElement.childNodes.forEach(t=>t.value===P._direction&&t.setAttribute("selected","")),p.coverElement.addEventListener("change",t=>P.setCover(localStorage.cover=t.target.value)),P.availableCovers.forEach(t=>p.addCover(t)),p.coverElement.childNodes.forEach(t=>t.value===P._cover&&t.setAttribute("selected","")),window.addEventListener("keydown",t=>{let e=t.keyCode;switch(e){case 86:null===P.timeout?P.restart(0):P.stop();break;default:console.log(e)}}),(()=>{let t=document.body.getElementsByTagName("script");for(let e=0;e!==t.length;e++)t[e].hasAttribute("src")||document.body.removeChild(t[e])})()}.toString(),i=document.createElement("script");i.innerHTML="("+t+")();",document.head.appendChild(i)})();